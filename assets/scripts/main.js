var I=Object.defineProperty;var T=(i,e,t)=>e in i?I(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var a=(i,e,t)=>T(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();class q{constructor(){a(this,"inputElements");a(this,"maskTemplate","+7 (___) ___-__-__");this.inputElements=document.querySelectorAll("input[data-phone-pattern]"),this.init()}getDigits(e){return e.replace(/\D/g,"")}init(){this.inputElements.forEach(e=>{const t=e.placeholder;e.addEventListener("focus",()=>{e.placeholder="",e.value||(e.value=this.maskTemplate);const s=this.getCursorPosition(this.getDigits(e.value).slice(1));setTimeout(()=>{e.setSelectionRange(s,s)},0)}),e.addEventListener("blur",()=>{e.value===this.maskTemplate&&(e.value=""),e.placeholder=t}),e.addEventListener("input",s=>{const o=s.target;let r=this.getDigits(o.value);r.startsWith("7")&&(r=r.slice(1)),r=r.slice(0,10);const l=this.applyMask(r);o.value=l;const c=this.getCursorPosition(r);o.setSelectionRange(c,c)}),e.addEventListener("click",s=>{const n=s.target,o=this.getCursorPosition(this.getDigits(n.value).slice(1));setTimeout(()=>{n.setSelectionRange(o,o)},0)}),e.addEventListener("keydown",s=>{if(s.key==="Backspace"){const n=s.target;if(this.getDigits(n.value).slice(1).length===1){s.preventDefault(),n.value=this.maskTemplate;const r=this.getCursorPosition("");n.setSelectionRange(r,r);return}}(s.key==="ArrowLeft"||s.key==="ArrowRight"||s.key==="ArrowUp"||s.key==="ArrowDown")&&s.preventDefault()})})}applyMask(e){let t=this.maskTemplate;const s=e.split("");for(const n of s)t=t.replace("_",n);return t}getCursorPosition(e){const t=e.length;return t===0?4:t<=3?4+t:t<=6?9+(t-3):t<=8?13+(t-6):t<=10?16+(t-8):18}}document.addEventListener("DOMContentLoaded",()=>{new q});class P{constructor(e,t={}){a(this,"options");a(this,"elements");a(this,"currentIndex",0);a(this,"totalSlides");a(this,"paginationBullets",[]);a(this,"autoplayInterval",null);a(this,"isTransitioning",!1);this.options={autoplay:!1,autoplaySpeed:3e3,loop:!0,effect:"fade",...t};const s=document.querySelector(e);if(!s)throw new Error(`Slider container with selector "${e}" not found`);const n=s.querySelector(".myslider-wrapper"),o=Array.from(s.querySelectorAll(".slider-item")),r=s.querySelector(".slider-button-prev"),l=s.querySelector(".slider-button-next"),c=s.querySelector(".slider-pagination");if(!n||o.length===0||!r||!l||!c)throw new Error("Required slider elements are missing");this.elements={container:s,wrapper:n,slides:o,prevButton:r,nextButton:l,pagination:c},this.totalSlides=o.length,this.totalSlides<2&&(this.options.autoplay=!1,this.options.loop=!1),this.init()}init(){this.updateSlide(),this.initPagination(),this.setupEventListeners(),this.setupAutoplay()}setupEventListeners(){this.elements.prevButton.addEventListener("click",()=>this.prev()),this.elements.nextButton.addEventListener("click",()=>this.next()),this.elements.wrapper.addEventListener("transitionend",()=>{this.isTransitioning=!1})}initPagination(){this.elements.pagination.innerHTML="",!(this.totalSlides<2)&&(this.elements.slides.forEach((e,t)=>{const s=document.createElement("div");s.classList.add("pagination-bullet"),s.dataset.index=t.toString(),s.addEventListener("click",()=>this.goToSlide(t)),this.elements.pagination.appendChild(s),this.paginationBullets.push(s)}),this.updatePagination())}updateSlide(){this.isTransitioning||(this.isTransitioning=!0,this.elements.slides.forEach((e,t)=>{e.classList.toggle("active",t===this.currentIndex)}),this.updatePagination())}updatePagination(){this.totalSlides<2||this.paginationBullets.forEach((e,t)=>{e.classList.toggle("active",t===this.currentIndex)})}setupAutoplay(){this.options.autoplay&&this.totalSlides>1&&(this.startAutoplay(),this.elements.container.addEventListener("mouseenter",()=>this.stopAutoplay()),this.elements.container.addEventListener("mouseleave",()=>this.startAutoplay()),this.elements.prevButton.addEventListener("click",()=>this.stopAutoplay()),this.elements.nextButton.addEventListener("click",()=>this.stopAutoplay()),this.paginationBullets.forEach(e=>e.addEventListener("click",()=>this.stopAutoplay())))}startAutoplay(){this.autoplayInterval||this.totalSlides<2||(this.autoplayInterval=window.setInterval(()=>{this.next()},this.options.autoplaySpeed))}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}prev(){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?(this.currentIndex-1+this.totalSlides)%this.totalSlides:Math.max(this.currentIndex-1,0),this.updateSlide())}next(){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?(this.currentIndex+1)%this.totalSlides:Math.min(this.currentIndex+1,this.totalSlides-1),this.updateSlide())}goToSlide(e){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?e%this.totalSlides:Math.max(0,Math.min(e,this.totalSlides-1)),this.updateSlide())}destroy(){this.stopAutoplay(),this.elements.prevButton.removeEventListener("click",()=>this.prev()),this.elements.nextButton.removeEventListener("click",()=>this.next()),this.elements.container.removeEventListener("mouseenter",()=>this.stopAutoplay()),this.elements.container.removeEventListener("mouseleave",()=>this.startAutoplay()),this.paginationBullets.forEach(e=>e.removeEventListener("click",()=>this.goToSlide(parseInt(e.dataset.index)))),this.elements.wrapper.removeEventListener("transitionend",()=>{this.isTransitioning=!1})}}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".myslider")&&new P(".myslider",{autoplay:!0,autoplaySpeed:4e3,loop:!0,effect:"fade"})});const h=document.querySelector("#modal-form"),g=document.querySelector(".start-project-overlay");h&&g&&h.addEventListener("submit",async function(i){i.preventDefault();const e=new FormData(h);try{const t=await fetch("sendform.php",{method:"POST",body:e});if(!t.ok)throw new Error(t.statusText);const s=await t.text();h.reset();const n=document.querySelector(".success span"),o=document.querySelector(".success");n&&o&&(n.innerHTML=s,o.classList.add("success-mail"),o.style.display="flex",setTimeout(()=>{o.classList.remove("success-mail"),o.style.display="none",setTimeout(()=>{g.classList.remove("is-active")},1500)},5e3))}catch(t){alert(`Ошибка отправки формы: ${t instanceof Error?t.message:"Неизвестная ошибка"}`)}});const x=40,d=document.querySelector(".header"),b=()=>window.pageYOffset||document.documentElement.scrollTop,D=()=>{d&&(b()<=x?d.classList.remove("is-active"):d.classList.add("is-active"))};document.addEventListener("DOMContentLoaded",D);window.addEventListener("scroll",()=>{d&&(b()>x?d.classList.add("is-active"):d.classList.remove("is-active"))});const y=document.querySelectorAll(".hero-video");if(y.length>0){const i=()=>{const e=window.innerWidth<=550;y.forEach(t=>{t&&(e?t.pause():t.play().catch(s=>{console.error("Автовоспроизведение заблокировано:",s.message)}))})};i(),window.addEventListener("resize",i)}const m=document.querySelector(".start-project-overlay"),M=document.querySelectorAll(".js-startproject"),f=document.querySelector(".js-closebutton");m&&(M.forEach(i=>{i.addEventListener("click",()=>{m.classList.add("is-active")})}),f==null||f.addEventListener("click",()=>{m.classList.remove("is-active")}));const L=document.querySelector("body"),E=document.querySelector(".nav-toggle");L&&E&&E.addEventListener("click",()=>{L.classList.toggle("menu-open")});const p=document.querySelector('[name="formbutton"]'),v=document.querySelector('[name="formcheck"]');p&&v?(p.setAttribute("disabled","true"),v.oninput=()=>{v.checked?p.removeAttribute("disabled"):p.setAttribute("disabled","true")}):console.error("Один из элементов формы не найден");document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling;e.classList.contains("active")?(e.classList.remove("active"),t&&(t.classList.remove("active"),t.style.maxHeight="0")):(e.classList.add("active"),t&&(t.classList.add("active"),t.style.maxHeight=`${t.scrollHeight+10}px`))}),e.addEventListener("keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e.click())})})});const B=i=>{i.forEach(e=>{e.target&&e.isIntersecting&&(e.target.classList.add("element-show"),u.unobserve(e.target))})};let u;function k(){u&&u.disconnect();const e={rootMargin:window.innerWidth<800?"0px 0px -25px 0px":"0px 0px -40px 0px",threshold:0};u=new IntersectionObserver(B,e),document.querySelectorAll(".element-animation-up").forEach(s=>{u.observe(s)})}k();window.addEventListener("resize",k);function O(i,e){let t=null;return(...s)=>{t&&clearTimeout(t),t=setTimeout(()=>{i(...s)},e)}}function S(){const i=document.querySelectorAll(".service-item");if(!i.length)return;let e=0;i.forEach(t=>{t.style.position="absolute",t.style.visibility="hidden",t.style.display="block",t.style.height="",t.style.minHeight=""}),i.forEach(t=>{const s=t.scrollHeight;s>e&&(e=s)}),i.forEach(t=>{t.style.position="",t.style.visibility="",t.style.display="",t.style.minHeight=`${e}px`})}document.addEventListener("DOMContentLoaded",()=>{S(),window.addEventListener("resize",O(S,100))});const w=document.querySelector(".footer-copyright");if(w){const i=w.querySelector("span");if(i){const s=`2019–${new Date().getFullYear()}`;i.textContent=s}}document.addEventListener("selectstart",function(i){i.preventDefault()});function A({containerId:i,videoUrl:e,posterUrl:t,preload:s="metadata",controls:n=!1}){const o=document.getElementById(i);if(!o)return;const r=document.createElement("video");r.classList.add("hero-video","bg--cover"),r.setAttribute("preload",s),r.setAttribute("poster",t),r.loop=!0,r.muted=!0,r.playsInline=!0,r.autoplay=!0,r.controls=n;const l=document.createElement("source");l.src=e,l.type="video/mp4",r.appendChild(l),o.appendChild(r),r.load(),r.play().catch(c=>{console.warn("Автовоспроизведение заблокировано браузером.",c)})}document.getElementById("hero-figure")&&A({containerId:"hero-figure",videoUrl:"/assets/video/careers.mp4",posterUrl:"/assets/images/hero/main-hero.webp",preload:"metadata"});document.getElementById("hero-figure-contact")&&A({containerId:"hero-figure-contact",videoUrl:"/assets/video/contacts/contact.mp4",posterUrl:"/assets/images/contacts/bg-contacts.webp",preload:"auto",controls:!0});
